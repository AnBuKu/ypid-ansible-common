#!/bin/bash
## @license AGPLv3 <https://www.gnu.org/licenses/agpl-3.0.html>
## @author Copyright (C) 2015 Robin Schneider <ypid@riseup.net>

# Convert repetitively used programs or commands to Sphinx inline syntax.
# http://sphinx-doc.org/markup/inline.html

# Donâ€™t use:
# * :option:`--tags`: https://github.com/debops/ansible-atd/pull/3#issuecomment-152024188
#
# Use:
# * :file:`/etc/issue`
# * :command:`rm`: The name of an OS-level command, such as `rm`. Used when
#   referring to a program primely used in the shell (CLI interface) by sysadmins
#   and/or users.
# * :program:`rsnapshot`: The name of an executable program. This may differ
#   from the file name for the executable for some platforms. In particular, the
#   .exe (or other) extension should be omitted for Windows programs.
#   Used when referring to programs (GUI, or programs not intended as shell
#   command) or services (not intended for user/admin execution directly but
#   via a init system/cron/something).
# * :rfc:`number#anchor`
# * :manpage:`ls(1)`
# * :regexp:`^WARN.*$`


git ls-files | xargs sed --in-place --regexp-extended '
	s/``(\/[^`]+)``/:file:`\1`/g;
	s/``(firejail|xpra|occ|check_mk|docker|git|hg|bzr|darcs|apt|dpkg|rpm|pacman|pacman-g2|yum|dnf|zypper|rsync|ssh|ip6?tables)``/:command:`\1`/g;
	s/``(etckeeper|rsnapshot|mysqld|collectd|ntpd|xinetd|ferm|ferment)``/:program:`\1`/g;
'
